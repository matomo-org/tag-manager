/*!!
 * Matomo - free/libre analytics platform
 *
 * Matomo Tag Manager
 *
 * @link https://matomo.org
 * @source https://github.com/matomo-org/tag-manager/blob/master/js/piwik.js
 * @license https://matomo.org/free-software/bsd/ BSD-3 Clause (also in js/LICENSE.txt)
 */
(function(){var b=document;var a=window;
/*!!! previewModeHook */
;if(typeof window.MatomoTagManager!=="object"){if(typeof window._mtm!=="object"){window._mtm=[]}window.MatomoTagManager=(function(){var j=new Date().getTime();function h(){if(window.mtmPreviewWindow&&"object"===typeof window.mtmPreviewWindow.mtmLogs){var F=new Date();var H=[];for(var G=0;G<arguments.length;G++){H.push(JSON.stringify(arguments[G]))}window.mtmPreviewWindow.mtmLogs.push({time:F.toLocaleTimeString()+"."+F.getMilliseconds(),messages:H})}}function d(F){if(window.mtmPreviewWindow&&"object"===typeof window.mtmPreviewWindow.mtmEvents&&F){var i=new Date();F.time=i.toLocaleTimeString()+"."+i.getMilliseconds();window.mtmPreviewWindow.mtmEvents.push(F)}}var x={enabled:!!window.mtmPreviewWindow,log:function(){h.apply(a,arguments);
if(this.enabled&&"undefined"!==typeof console&&console&&console.debug){console.debug.apply(console,arguments)}},error:function(){h.apply(a,arguments);if("undefined"!==typeof console&&console&&console.error){console.error.apply(console,arguments)}}};function B(i){x.error(i);if(typeof k!=="object"||k.THROW_ERRORS){throw new Error(i)}}function t(G,I){if(A.isString(G)&&G.indexOf(".")!==-1){var H=G.split(".");var F;for(F=0;F<H.length;F++){if(H[F] in I){I=I[H[F]]}else{return}}return I}}function E(J){var I="mtm:";var F={};function H(M){return J in a&&A.isObject(a[J])}function L(M){return H()&&A.isFunction(a[J][M])}function K(O,M){if(L("setItem")){try{a[J].setItem(I+O,JSON.stringify(M))}catch(N){}}else{F[O]=M}}function G(O){if(L("getItem")){try{var M=a[J].getItem(I+O);if(M){M=JSON.parse(M);if(A.isObject(M)){return M}}}catch(N){}return{}}else{if(O in F){return F[O]}}}function i(N){if(L("removeItem")){try{a[J].removeItem(I+N)}catch(M){}}else{if(N in F){delete F[N]}}}this.set=function(Q,N,R,M){var O=null;
if(M){O=(new Date().getTime())+(parseInt(M,10)*1000)}var P=G(Q);P[N]={value:R,expire:O};K(Q,P)};this.get=function(O,M){var N=G(O);if(N&&M in N&&"value" in N[M]){if(N[M].expire&&N[M].expire<(new Date().getTime())){delete N[M];K(O);return}return N[M].value}};this.clearAll=function(){F={};if(H()&&A.isFunction(Object.keys)){var M=Object.keys(a[J]);if(M){for(var N=0;N<M.length;N++){if(String(M[N]).substr(0,I.length)===I){i(String(M[N]).substr(I.length))}}}}}}var w=new E("localStorage");var e=new E("sessionStorage");var A={_compare:function(I,F,H){var G=["equals","starts_with","contains","ends_with"];if(this.indexOfArray(G,H)!==-1){I=String(I).toLowerCase();F=String(F).toLowerCase()}switch(H){case"equals":return String(I)===String(F);case"equals_exactly":return String(I)===String(F);case"regexp":return null!==(String(I).match(new RegExp(F)));case"regexp_ignore_case":return null!==(String(I).match(new RegExp(F,"i")));case"lower_than":return I<F;case"lower_than_or_equals":return I<=F;case"greater_than":return I>F;
case"greater_than_or_equals":return I>=F;case"contains":return String(I).indexOf(F)!==-1;case"match_css_selector":if(!F||!I){return false}var i=z.bySelector(F);return A.indexOfArray(i,I)!==-1;case"starts_with":return String(I).indexOf(F)===0;case"ends_with":return String(I).substring(I.length-F.length,I.length)===F}return false},compare:function(I,F,G){var H=String(G).indexOf("not_")===0;if(H){G=String(G).substr("not_".length)}var i=this._compare(I,F,G);if(H){return !i}return i},trim:function(i){if(i&&String(i)===i){return i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return i},isDefined:function(F){var i=typeof F;return i!=="undefined"},isFunction:function(i){return typeof i==="function"},isObject:function(i){return typeof i==="object"&&i!==null},isString:function(i){return typeof i==="string"},isNumber:function(i){return typeof i==="number"},isArray:function(F){if(!A.isObject(F)){return false}if("function"===typeof Array.isArray&&Array.isArray){return Array.isArray(F)}var G=Object.prototype.toString;
var i=G.call([]);return G.call(F)===i},hasProperty:function(i,F){return Object.prototype.hasOwnProperty.call(i,F)},indexOfArray:function(H,G){if(!H){return -1}if("function"===typeof H.indexOf&&H.indexOf){return H.indexOf(G)}if(!this.isArray(H)){return -1}for(var F=0;F<H.length;F++){if(H[F]===G){return F}}return -1},setMethodWrapIfNeeded:function(F,G,I){if(!(G in F)){F[G]=I;return}var H=F[G];if(!k.utils.isFunction(H)){F[G]=I;return}try{F[G]=function(){try{var J=H.apply(F,[].slice.call(arguments,0))}catch(K){I.apply(F,[].slice.call(arguments,0));throw K}I.apply(F,[].slice.call(arguments,0));return J}}catch(i){}}};var s=function(){this.values={};this.events=[];this.callbacks=[];this.reset=function(){this.values={};this.events=[];this.callbacks=[]};this.push=function(G){if(!A.isObject(G)){x.log("pushed dataLayer value is not an object",G);return}this.events.push(G);var F;for(F in G){if(A.hasProperty(G,F)){this.set(F,G[F])}}for(F=0;F<this.callbacks.length;F++){if(this.callbacks[F]){this.callbacks[F](G)
}}};this.on=function(i){this.callbacks.push(i);return this.callbacks.length-1};this.off=function(i){if(i in this.callbacks){this.callbacks[i]=null}};this.set=function(i,F){this.values[i]=F};this.getAllEvents=function(i){return this.events};this.get=function(i){if(i in this.values){if(A.isFunction(this.values[i])){return this.values[i]()}else{if(A.isObject(this.values[i])&&A.isFunction(this.values[i].get)){return this.values[i].get()}}return this.values[i]}var F=t(i,this.values);if(A.isDefined(F)){return F}}};var o=new s();var D={matchesDateRange:function(G,F,H){var I=G.getTime()+(G.getTimezoneOffset()*60000);if(F){F=String(F).replace(/-/g,"/")}if(H){H=String(H).replace(/-/g,"/")}var K,i;try{K=new Date(F)}catch(J){if(F){B("Invalid startDateTime given")}}try{i=new Date(H)}catch(J){if(H){B("Invalid startDateTime given")}}if(F&&isNaN&&isNaN(K.getTime())){B("Invalid startDateTime given")}if(H&&isNaN&&isNaN(i.getTime())){B("Invalid endDateTime given")}if(F&&I<(K.getTime()+(K.getTimezoneOffset()*60000))){return false
}if(H&&I>(i.getTime()+(i.getTimezoneOffset()*60000))){return false}return true}};var q={parseUrl:function(i,I){try{var J=document.createElement("a");J.href=i;var F=J.href;J=document.createElement("a");J.href=F;if(I&&I in J){if("hash"===I){return String(J[I]).replace("#","")}else{if("protocol"===I){return String(J[I]).replace(":","")}else{if("search"===I){return String(J[I]).replace("?","")}else{if("port"===I&&!J[I]){if(J.protocol==="https:"){return"443"}else{if(J.protocol==="http:"){return"80"}}}}}}if("pathname"===I&&J[I]&&String(J[I]).substr(0,1)!=="/"){return"/"+J[I]}if("port"===I&&J[I]){return String(J[I])}return J[I]}if("origin"===I&&"protocol" in J&&J.protocol){return J.protocol+"//"+J.hostname+(J.port?":"+J.port:"")}return}catch(H){if("function"===typeof URL){var G=new URL(i);if(I&&I in G){if("hash"===I){return String(G[I]).replace("#","")}else{if("protocol"===I){return String(G[I]).replace(":","")}else{if("search"===I){return String(G[I]).replace("?","")}else{if("port"===I&&!G[I]){if(G.protocol==="https:"){return 443
}else{if(G.protocol==="http:"){return 80}}}}}}return G[I]}return}}},decodeSafe:function(F){try{return a.decodeURIComponent(F)}catch(i){return a.unescape(F)}},getQueryParameter:function(J,F){if(!A.isDefined(F)){F=a.location.search}if(!F||!A.isDefined(J)||J===null||J===false||J===""){return null}var i=F.substr(0,1);if(F!=="?"&&F!=="&"){F="?"+F}J=J.replace("[","\\[");J=J.replace("]","\\]");var I=new RegExp("[?&]"+J+"(=([^&#]*)|&|#|$)");var H=I.exec(F);if(!H){return null}if(!H[2]){return""}var G=H[2].replace(/\+/g," ");return this.decodeSafe(G)}};var c;var C={hasSetupScroll:false,scrollCallbacks:[],scrollListenEvents:["scroll","resize"],offScroll:function(F){if(F in this.scrollCallbacks){this.scrollCallbacks[F]=null}var H=0,G=0;for(H in this.scrollCallbacks){if(this.scrollCallbacks[H]){G++}}if(!G){for(H=0;H<this.scrollListenEvents.length;H++){if(b.removeEventListener){a.removeEventListener(this.scrollListenEvents[H],this.didScroll,true)}else{a.detachEvent("on"+this.scrollListenEvents[H],this.didScroll)
}}this.hasSetupScroll=false}},didScroll:function(i){if(c){return}if(i&&i.type&&i.type==="scroll"&&i.target&&i.target!==b&&i.target!==a){return}c=setTimeout(function(){c=null;var F;for(F=0;F<C.scrollCallbacks.length;F++){if(C.scrollCallbacks[F]){C.scrollCallbacks[F](i)}}},120)},onScroll:function(F){this.scrollCallbacks.push(F);if(!this.hasSetupScroll){this.hasSetupScroll=true;var i=0;for(i=0;i<this.scrollListenEvents.length;i++){if(b.addEventListener){a.addEventListener(this.scrollListenEvents[i],this.didScroll,true)}else{a.attachEvent("on"+this.scrollListenEvents[i],this.didScroll)}}}return this.scrollCallbacks.length-1},getScreenHeight:function(){return a.screen.height},getScreenWidth:function(){return a.screen.width},getViewportWidth:function(){var i=a.innerWidth||b.documentElement.clientWidth||b.body.clientWidth;if(!i){return 0}return i},getViewportHeight:function(){var i=a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight;if(!i){return 0}return i},getPerformanceTiming:function(i){if("performance" in a&&A.isObject(a.performance)&&A.isObject(a.performance.timing)&&i in a.performance.timing){return a.performance.timing[i]
}return 0}};var z={loadScriptUrl:function(G,F){if(!F){F={}}if(!A.isDefined(F.defer)){F.defer=true}if(!A.isDefined(F.async)){F.async=true}if(!A.isDefined(F.type)){F.type="text/javascript"}var i=document.createElement("script");i.src=G;i.type=F.type;i.defer=!!F.defer;i.async=!!F.async;if(A.isFunction(F.onload)){i.onload=F.onload}if(A.isFunction(F.onerror)){i.onerror=F.onerror}if(A.isDefined(F.charset)){i.charset=F.charset}if(A.isDefined(F.id)){i.id=F.id}b.head.appendChild(i)},getScrollLeft:function(){return a.document.body.scrollLeft||a.document.documentElement.scrollLeft},getScrollTop:function(){return a.document.body.scrollTop||a.document.documentElement.scrollTop},getDocumentHeight:function(){return Math.max(b.body.offsetHeight,b.body.scrollHeight,b.documentElement.offsetHeight,b.documentElement.clientHeight,b.documentElement.scrollHeight,1)},getDocumentWidth:function(){return Math.max(b.body.offsetWidth,b.body.scrollWidth,b.documentElement.offsetWidth,b.documentElement.clientWidth,b.documentElement.scrollWidth,1)
},addEventListener:function(H,G,F,i){if(!H){x.log("element not found, cannot add event listener",H,this);return}if(H.addEventListener){i=i||false;H.addEventListener(G,F,i);return true}if(H.attachEvent){return H.attachEvent("on"+G,F)}H["on"+G]=F},getElementText:function(F){if(!F){return}var i=F.innerText||F.textContent||"";i=i.replace(/([\s\uFEFF\xA0])+/g," ");i=i.replace(/(\s)+/g," ");return A.trim(i)},getElementClassNames:function(i){if(i&&i.className){return A.trim(String(i.className).replace(/\s{2,}/g," "))}return""},getElementAttribute:function(G,i){if(G&&G.getAttribute){return G.getAttribute(i)}if(!G||!G.attributes){return}var F=(typeof G.attributes[i]);if("undefined"===F){return null}if(G.attributes[i].value){return G.attributes[i].value}if(G.attributes[i].nodeValue){return G.attributes[i].nodeValue}return null},_htmlCollectionToArray:function(G){var i=[];if(!G||!G.length){return i}var F;for(F=0;F<G.length;F++){i.push(G[F])}return i},byId:function(i){if(A.isString(i)&&i.substr(0,1)==="#"){i=i.substr(1)
}return b.getElementById(i)},byClassName:function(i){if(i&&"getElementsByClassName" in b){return this._htmlCollectionToArray(b.getElementsByClassName(i))}return[]},byTagName:function(i){if(i&&"getElementsByTagName" in b){return this._htmlCollectionToArray(b.getElementsByTagName(i))}return[]},bySelector:function(i){if(i&&"querySelectorAll" in b){return this._htmlCollectionToArray(b.querySelectorAll(i))}return[]},isElementContext:function(H,i){if(!H||!i){return false}H=String(H).toLowerCase();i=String(i).toLowerCase();var G=H.lastIndexOf("<"+i);if(G===-1){return false}var F=H.substring(G);return !F.match(new RegExp("<\\s*/\\s*"+i+">"))},isAttributeContext:function(L,J){if(!L||!J){return false}L=String(L).replace(/([\s\uFEFF\xA0]*=[\s\uFEFF\xA0]*)/g,"=");var G=L.lastIndexOf("<");if(G===-1){return false}var N=L.substring(G);var F=N.indexOf(">");if(F!==-1){return false}var M=N.lastIndexOf("=");if(M===-1){return false}var I=N.lastIndexOf(" ",M);var K=N.substring(I,M);K=A.trim(K);if(K.toLowerCase()!==J.toLowerCase()){return false
}var H=N.substring(M).replace("=","");var i=H.substring(0,1);if('"'===i){return -1===H.substring(1).indexOf('"')}else{if("'"===i){return -1===H.substring(1).indexOf("'")}}return -1===H.indexOf(" ")},onLoad:function(i){if(b.readyState==="complete"){i()}else{if(a.addEventListener){a.addEventListener("load",i)}else{if(a.attachEvent){a.attachEvent("onload",i)}}}},onReady:function(G){var i=false;if(b.attachEvent){i=b.readyState==="complete"}else{i=b.readyState!=="loading"}if(i){G();return}if(b.addEventListener){this.addEventListener(b,"DOMContentLoaded",function F(){b.removeEventListener("DOMContentLoaded",F,false);if(!i){i=true;G()}})}else{if(b.attachEvent){b.attachEvent("onreadystatechange",function F(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",F);if(!i){i=true;G()}}})}}this.onLoad(function(){if(!i){i=true;G()}})}};function v(G){this.window=a;this.document=b;this.set=function(i,H){this[i]=H};this.get=function(H,i){if(H===null||H===false||!A.isDefined(H)){return i}if(H in this){if(A.isObject(this[H])&&"get" in this[H]&&A.isFunction(this[H].get)){return this[H].get()
}return this[H]}var I=t(H,this);if(A.isDefined(I)){return I}return i};this.buildVariable=function(i){return n(i,this.get("container"))};if(A.isObject(G)){for(var F in G){if(A.hasProperty(G,F)){this.set(F,G[F])}}}}function y(F,i){this.isValid=function(){var H=n(F.actual,i).get();var G=n(F.expected,i).get();return A.compare(H,G,F.comparison)}}function n(F,i){if(A.isObject(F)&&F.joinedVariable&&A.isArray(F.joinedVariable)){return new p(F.joinedVariable,i)}else{if(A.isObject(F)&&F.type){return new r(F,i)}}return new l(F,i)}function p(F,i){this.name="";this.type="JoinedVariable";this.getDefinition=function(){return F};this.get=function(){var H="",I;for(var G=0;G<F.length;G++){I=n(F[G],i).toString();if(I!==false&&I!==null&&A.isDefined(I)){H+=I}}return H};this.toString=function(){return this.get()};this.addDebugValues=function(G){G.push({name:null,type:"_joined",value:this.get()})}}function l(H,F){this.name="";this.type="ConstantVariable";this.getDefinition=function(){return H};function G(J){return J&&A.isObject(J)&&!A.isArray(J)&&(A.hasProperty(J,"type")||A.hasProperty(J,"joinedVariable"))
}function I(L){if(L==null||typeof L!=="object"){return L}var J=new L.constructor();var K;for(K in L){if(A.hasProperty(L,K)){J[K]=I(L[K])}}return J}function i(K){var J;if(G(K)){K=n(K,F).get()}else{if(K&&A.isArray(K)){for(J=0;J<K.length;J++){K[J]=i(K[J])}}else{if(K&&A.isObject(K)){for(J in K){if(A.hasProperty(K,J)){K[J]=i(K[J])}}}}}return K}this.get=function(){var J=H;if(A.isObject(J)){J=I(J);J=i(J)}return J};this.toString=function(){return H};this.addDebugValues=function(J){J.push({name:null,type:"_constant",value:this.get()})}}function r(G,F){this.type=G.type;this.name=G.name;this.lookUpTable=G.lookUpTable||[];this.defaultValue=undefined;this.parameters=G.parameters||{};this.getDefinition=function(){return G};this.get=function(){var K;try{K=this.theVariable.get()}catch(L){x.error("Failed to get value of variable",L,this);K=undefined}if((!A.isDefined(K)||K===null||K===false)&&A.isDefined(this.defaultValue)){K=this.defaultValue}var J;for(J=0;J<this.lookUpTable.length;J++){var M=this.lookUpTable[J];
if(A.compare(K,M.matchValue,M.comparison)){return M.outValue}}return K};this.toString=function(){if(this.theVariable&&A.hasProperty(this.theVariable,"toString")&&A.isFunction(this.theVariable.toString)){try{return this.theVariable.toString()}catch(i){x.error("Failed to get toString of variable",i,this);return}}return this.get()};this.addDebugValues=function(i){i.push({name:this.name,type:this.type,value:this.get()})};if("undefined"!==typeof G.defaultValue){this.defaultValue=G.defaultValue}if(!A.isDefined(G.Variable)||!G.Variable){x.log("no template defined for variable ",G);return}var H,I=new v({variable:this,container:F});if(A.isObject(G.parameters)){for(H in G.parameters){if(A.hasProperty(G.parameters,H)){I.set(H,n(G.parameters[H],F))}}}if(A.isFunction(G.Variable)){this.theVariable=new G.Variable(I,k)}else{if(A.isObject(G.Variable)){this.theVariable=G.Variable}else{if(G.Variable in F.templates){this.theVariable=new F.templates[G.Variable](I,k)}else{B("No matching variable template found")
}}}}function f(H,F){this.referencedTags=[];this.id=H.id;this.type=H.type;this.name=H.name;this.conditions=[];this.parameters=H.parameters||{};var G=this;this.getId=function(){return this.id};this.setUp=function(){if(this.theTrigger&&this.theTrigger.setUp&&A.isFunction(this.theTrigger.setUp)){this.theTrigger.setUp(function(O){o.push(O);if(!("event" in O)){return}var K={tags:[],variables:[],metTrigger:null,name:O.event,eventData:O,container:{}};var N,M;if(G.meetsConditions()){x.log("The condition is met for trigger "+G.name,G);K.metTrigger={name:G.name,type:G.type};var L=G.getReferencedTags();for(M=0;M<L.length;M++){if(L[M].hasBlockTrigger(G)){L[M].block();L[M].addDebugValues(K.tags,"Block")}else{if(L[M].hasFireTrigger(G)){L[M].fire();L[M].addDebugValues(K.tags,"Fire")}}}}if(window.mtmPreviewWindow||x.enabled){F.addDebugValues(K.container);d(K);if(x.enabled){x.log("event: ",K)}}})}};this.addReferencedTag=function(i){this.referencedTags.push(i)};this.getReferencedTags=function(){return this.referencedTags
};this.meetsConditions=function(){var K,L;for(K=0;K<this.conditions.length;K++){L=new y(this.conditions[K],F);if(!L.isValid()){return false}}return true};if(H.conditions&&A.isArray(H.conditions)){this.conditions=H.conditions}var I,J=new v({trigger:this,container:F});if(A.isObject(H.parameters)){for(I in H.parameters){if(A.hasProperty(H.parameters,I)){J.set(I,n(H.parameters[I],F))}}}if(!A.isDefined(H.Trigger)||!H.Trigger){x.error("no template defined for trigger ",H);return}if(A.isFunction(H.Trigger)){this.theTrigger=new H.Trigger(J,k)}else{if(A.isObject(H.Trigger)){this.theTrigger=H.Trigger}else{if(H.Trigger in F.templates){this.theTrigger=new F.templates[H.Trigger](J,k)}else{B("No matching trigger template found")}}}J=null}function g(F,G){this.type=F.type;this.name=F.name;this.fireTriggerIds=F.fireTriggerIds?F.fireTriggerIds:[];this.blockTriggerIds=F.blockTriggerIds?F.blockTriggerIds:[];this.fireLimit=F.fireLimit?F.fireLimit:g.FIRE_LIMIT_UNLIMITED;this.fireDelay=F.fireDelay?parseInt(F.fireDelay,10):0;
this.startDate=F.startDate?F.startDate:null;this.endDate=F.endDate?F.endDate:null;this.numExecuted=0;this.blocked=false;this.parameters=F.parameters||{};var H=this;this.addDebugValues=function(i,K){i.push({action:K,type:this.type,name:this.name,numExecuted:this.numExecuted})};this._doFire=function(){if(this.blocked){x.log("not firing as this tag is blocked",this);return"tag is blocked"}if(this.fireLimit!==g.FIRE_LIMIT_UNLIMITED&&this.numExecuted){x.log("not firing as this tag has limit reached",this);return"fire limit is restricted"}var K="tag";if(G.id){K+="_"+G.id}if(this.fireLimit===g.FIRE_LIMIT_ONCE_24HOURS&&!window.mtmPreviewWindow){if(w.get(K,this.name)){x.log("not firing as this tag has 24hours limit reached",this);return"fire limit 24hours is restricted"}}if(this.fireLimit===g.FIRE_LIMIT_ONCE_LIFETIME&&!window.mtmPreviewWindow){if(w.get(K,this.name)){x.log("not firing as this tag has limit reached",this);return"fire limit lifetime is restricted"}}if(!D.matchesDateRange(new Date(),this.startDate,this.endDate)){x.log("not firing as this tag does not match date",this);
return"date range does not match"}if(!this.theTag||!this.theTag.fire){x.log("not firing as tag does not exist anymore",this);return"tag not found"}x.log("firing this tag",this);this.numExecuted++;if(this.fireLimit===g.FIRE_LIMIT_ONCE_24HOURS){var i=24*60*60;w.set(K,this.name,"1",i)}if(this.fireLimit===g.FIRE_LIMIT_ONCE_LIFETIME){w.set(K,this.name,"1")}this.theTag.fire();x.log("fired this tag",this)};this.fire=function(){if(this.fireDelay){setTimeout(function(){H._doFire()},this.fireDelay)}else{return this._doFire()}};this.block=function(){this.blocked=true};this.hasFireTrigger=function(i){if(!this.fireTriggerIds||!this.fireTriggerIds.length){return false}if(!i){return false}var K=i.getId();return A.indexOfArray(this.fireTriggerIds,K)!==-1};this.hasBlockTrigger=function(i){if(!this.blockTriggerIds||!this.blockTriggerIds.length){return false}if(!i){return false}var K=i.getId();return A.indexOfArray(this.blockTriggerIds,K)!==-1};if(!A.isDefined(F.Tag)||!F.Tag){x.error("no template defined for tag ",F);
return}var I,J=new v({tag:this,container:G});if(A.isObject(F.parameters)){for(I in F.parameters){if(A.hasProperty(F.parameters,I)){J.set(I,n(F.parameters[I],G))}}}if(A.isFunction(F.Tag)){this.theTag=new F.Tag(J,k)}else{if(A.isObject(F.Tag)){this.theTag=F.Tag}else{if(F.Tag in G.templates){this.theTag=new G.templates[F.Tag](J,k)}else{B("No matching tag template found")}}}}g.FIRE_LIMIT_ONCE_PAGE="once_page";g.FIRE_LIMIT_ONCE_24HOURS="once_24hours";g.FIRE_LIMIT_ONCE_LIFETIME="once_lifetime";g.FIRE_LIMIT_UNLIMITED="unlimited";function m(G,L){var H=this;this.id=G.id;this.idsite=G.idsite||null;this.versionName=G.versionName||null;this.revision=G.revision||null;this.environment=G.environment||null;this.templates=L||{};this.dataLayer=new s();this.variables=[];this.triggers=[];this.tags=[];this.onNewGlobalDataLayerValue=function(i){this.dataLayer.push(i)};o.on(function(i){H.onNewGlobalDataLayerValue(i)});this.addDebugValues=function(N){N.variables=[];var O;for(O=0;O<this.variables.length;O++){this.variables[O].addDebugValues(N.variables)
}N.tags=[];for(O=0;O<this.tags.length;O++){this.tags[O].addDebugValues(N.tags,"Not Fired Yet")}N.id=this.id;N.versionName=this.versionName;N.dataLayer=JSON.parse(JSON.stringify(this.dataLayer.values))};this.getTriggerById=function(N){if(!N){return}var O;for(O=0;O<this.triggers.length;O++){if(this.triggers[O].getId()===N){return this.triggers[O]}}};this.addTrigger=function(i){if(!i){return}var N=this.getTriggerById(i.id);if(!N){N=new f(i,this);this.triggers.push(N)}return N};var K,J,F,M,I;if(G.variables&&A.isArray(G.variables)){for(K=0;K<G.variables.length;K++){this.variables.push(n(G.variables[K],this))}}if(G.triggers&&A.isArray(G.triggers)){for(K=0;K<G.triggers.length;K++){this.addTrigger(G.triggers[K])}}if(G.tags&&A.isArray(G.tags)){for(K=0;K<G.tags.length;K++){M=G.tags[K];F=new g(M,this);this.tags.push(F);if(M.blockTriggerIds&&A.isArray(M.blockTriggerIds)){for(J=0;J<M.blockTriggerIds.length;J++){I=this.getTriggerById(M.blockTriggerIds[J]);if(I){I.addReferencedTag(F)}}}if(M.fireTriggerIds&&A.isArray(M.fireTriggerIds)){for(J=0;
J<M.fireTriggerIds.length;J++){I=this.getTriggerById(M.fireTriggerIds[J]);if(I){I.addReferencedTag(F)}}}}}this.run=function(){var O=o.getAllEvents();var N;for(N=0;N<O.length;N++){this.onNewGlobalDataLayerValue(O[N])}for(N=0;N<this.triggers.length;N++){this.triggers[N].setUp()}}}var k={THROW_ERRORS:true,dataLayer:o,containers:[],url:q,date:D,utils:A,debug:x,dom:z,window:C,Variable:r,storage:{local:w,session:e},_buildVariable:n,Condition:y,TemplateParameters:v,Trigger:f,Tag:g,throwError:B,Container:m,addContainer:function(H,F){if(!window.mtmPreviewWindow){var G=b.getElementById("mtmDebugFrame");if(G&&G.contentWindow){window.mtmPreviewWindow=G.contentWindow}}x.log("creating container");var i=new m(H,F);this.containers.push(i);i.dataLayer.push({"mtm.containerId":i.id});x.log("running container");i.run();return i},enableDebugMode:function(){x.enabled=true}};if("matomoTagManagerAsyncInit" in a&&A.isFunction(a.matomoTagManagerAsyncInit)){a.matomoTagManagerAsyncInit()}a._mtm.push=function(){var J,H,G,L,M;
for(J=0;J<arguments.length;J+=1){M=null;if(arguments[J]&&arguments[J].slice){M=arguments[J].slice()}L=arguments[J];if(A.isObject(L)&&!A.isArray(L)){o.push(L);continue}G=L.shift();var K=A.isString(G)&&G.indexOf("::")>0;if(K){var F,I;F=G.split("::");I=F[0];G=F[1];if("object"===typeof k[I]&&A.isFunction(k[I][G])){k[I][G].apply(k[I],L)}}else{if(G&&G in k&&A.isFunction(k[G])){k[G].apply(k,L)}else{x.error("method "+G+" is not valid")}}}};var u;for(u=0;u<a._mtm.length;u++){a._mtm.push(a._mtm[u])}o.push({"mtm.mtmScriptLoadedTime":j});if("undefined"!==typeof a.dataLayer&&A.isArray(a.dataLayer)){for(u=0;u<a.dataLayer.length;u++){if(A.isObject(a.dataLayer[u])){o.push(a.dataLayer[u])}}}return k})()}
/*!!! initContainerHook */
})();
