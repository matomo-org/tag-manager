/*!!
 * Matomo - free/libre analytics platform
 *
 * Matomo Tag Manager
 *
 * @link https://matomo.org
 * @source https://github.com/matomo-org/tag-manager/blob/master/js/piwik.js
 * @license https://matomo.org/free-software/bsd/ BSD-3 Clause (also in js/LICENSE.txt)
 */
(function(){var b=document;var a=window;
/*!!! windowLevelSettingsHook */
;
/*!!! previewModeHook */
;if(typeof window.MatomoTagManager!=="object"){if(typeof window._mtm!=="object"){window._mtm=[]}window.MatomoTagManager=(function(){var l=new Date().getTime();function j(){if(window.mtmPreviewWindow&&"object"===typeof window.mtmPreviewWindow.mtmLogs){var H=new Date();var J=[];for(var I=0;I<arguments.length;I++){J.push(JSON.stringify(arguments[I],function(i,K){if(typeof K==="object"&&K instanceof Node){return K.nodeName}else{return K}}))}window.mtmPreviewWindow.mtmLogs.push({time:H.toLocaleTimeString()+"."+H.getMilliseconds(),messages:J})}}function d(H){if(window.mtmPreviewWindow&&"object"===typeof window.mtmPreviewWindow.mtmEvents&&H){var i=new Date();
H.time=i.toLocaleTimeString()+"."+i.getMilliseconds();window.mtmPreviewWindow.mtmEvents.push(H)}}var z={enabled:!!window.mtmPreviewWindow,log:function(){j.apply(a,arguments);if(this.enabled&&"undefined"!==typeof console&&console&&console.debug){console.debug.apply(console,arguments)}},error:function(){j.apply(a,arguments);if("undefined"!==typeof console&&console&&console.error){console.error.apply(console,arguments)}}};function D(i){z.error(i);if(typeof m!=="object"||m.THROW_ERRORS){throw new Error(i)}}function v(I,K){if(C.isString(I)&&I.indexOf(".")!==-1){var J=I.split(".");var H;for(H=0;H<J.length;H++){if(J[H] in K){K=K[J[H]]}else{return}}return K}}function G(L){var K="mtm:";var H={};function J(O){return L in a&&C.isObject(a[L])}function N(O){return J()&&C.isFunction(a[L][O])}function M(Q,O){if(N("setItem")){try{a[L].setItem(K+Q,JSON.stringify(O))}catch(P){}}else{H[Q]=O}}function I(Q){if(N("getItem")){try{var O=a[L].getItem(K+Q);if(O){O=JSON.parse(O);if(C.isObject(O)){return O}}}catch(P){}return{}
}else{if(Q in H){return H[Q]}}}function i(P){if(N("removeItem")){try{a[L].removeItem(K+P)}catch(O){}}else{if(P in H){delete H[P]}}}this.set=function(S,P,T,O){var Q=null;if(O){Q=(new Date().getTime())+(parseInt(O,10)*1000)}var R=I(S);R[P]={value:T,expire:Q};M(S,R)};this.get=function(Q,O){var P=I(Q);if(P&&O in P&&"value" in P[O]){if(P[O].expire&&P[O].expire<(new Date().getTime())){delete P[O];M(Q);return}return P[O].value}};this.clearAll=function(){H={};if(J()&&C.isFunction(Object.keys)){var O=Object.keys(a[L]);if(O){for(var P=0;P<O.length;P++){if(String(O[P]).substr(0,K.length)===K){i(String(O[P]).substr(K.length))}}}}}}var y=new G("localStorage");var e=new G("sessionStorage");var C={_compare:function(K,H,J){var I=["equals","starts_with","contains","ends_with"];if(this.indexOfArray(I,J)!==-1){K=String(K).toLowerCase();H=String(H).toLowerCase()}switch(J){case"equals":return String(K)===String(H);case"equals_exactly":return String(K)===String(H);case"regexp":return null!==(String(K).match(new RegExp(H)));
case"regexp_ignore_case":return null!==(String(K).match(new RegExp(H,"i")));case"lower_than":return K<H;case"lower_than_or_equals":return K<=H;case"greater_than":return K>H;case"greater_than_or_equals":return K>=H;case"contains":return String(K).indexOf(H)!==-1;case"match_css_selector":if(!H||!K){return false}var i=B.bySelector(H);return C.indexOfArray(i,K)!==-1;case"starts_with":return String(K).indexOf(H)===0;case"ends_with":return String(K).substring(K.length-H.length,K.length)===H}return false},compare:function(K,H,I){var J=String(I).indexOf("not_")===0;if(J){I=String(I).substr("not_".length)}var i=this._compare(K,H,I);if(J){return !i}return i},trim:function(i){if(i&&String(i)===i){return i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return i},isDefined:function(H){var i=typeof H;return i!=="undefined"},isFunction:function(i){return typeof i==="function"},isObject:function(i){return typeof i==="object"&&i!==null},isString:function(i){return typeof i==="string"},isNumber:function(i){return typeof i==="number"
},isArray:function(H){if(!C.isObject(H)){return false}if("function"===typeof Array.isArray&&Array.isArray){return Array.isArray(H)}var I=Object.prototype.toString;var i=I.call([]);return I.call(H)===i},hasProperty:function(i,H){return Object.prototype.hasOwnProperty.call(i,H)},indexOfArray:function(J,I){if(!J){return -1}if("function"===typeof J.indexOf&&J.indexOf){return J.indexOf(I)}if(!this.isArray(J)){return -1}for(var H=0;H<J.length;H++){if(J[H]===I){return H}}return -1},setMethodWrapIfNeeded:function(H,I,K){if(!(I in H)){H[I]=K;return}var J=H[I];if(!m.utils.isFunction(J)){H[I]=K;return}try{H[I]=function(){try{var L=J.apply(H,[].slice.call(arguments,0))}catch(M){K.apply(H,[].slice.call(arguments,0));throw M}K.apply(H,[].slice.call(arguments,0));return L}}catch(i){}}};var u=function(){this.values={};this.events=[];this.callbacks=[];this.reset=function(){this.values={};this.events=[];this.callbacks=[]};this.push=function(I){if(!C.isObject(I)){z.log("pushed dataLayer value is not an object",I);
return}this.events.push(I);var H;for(H in I){if(C.hasProperty(I,H)){this.set(H,I[H])}}for(H=0;H<this.callbacks.length;H++){if(this.callbacks[H]){this.callbacks[H](I)}}};this.on=function(i){this.callbacks.push(i);return this.callbacks.length-1};this.off=function(i){if(i in this.callbacks){this.callbacks[i]=null}};this.set=function(i,H){this.values[i]=H};this.getAllEvents=function(i){return this.events};this.get=function(i){if(i in this.values){if(C.isFunction(this.values[i])){return this.values[i]()}else{if(C.isObject(this.values[i])&&C.isFunction(this.values[i].get)){return this.values[i].get()}}return this.values[i]}var H=v(i,this.values);if(C.isDefined(H)){return H}}};var q=new u();var F={matchesDateRange:function(I,H,J){var K=Date.UTC(I.getUTCFullYear(),I.getUTCMonth(),I.getUTCDate(),I.getUTCHours(),I.getUTCMinutes(),I.getUTCSeconds());if(H){H=String(H).replace(/-/g,"/")}if(J){J=String(J).replace(/-/g,"/")}var M,i;try{M=this.convertStringToDate(H)}catch(L){if(H){D("Invalid startDateTime given")
}}try{i=this.convertStringToDate(J)}catch(L){if(J){D("Invalid endDateTime given")}}if(H&&isNaN&&isNaN(M.getTime())){D("Invalid startDateTime given")}if(J&&isNaN&&isNaN(i.getTime())){D("Invalid endDateTime given")}if(H&&K<M.getTime()){return false}if(J&&K>i.getTime()){return false}return true},convertStringToDate:function(i){var H=(i&&i.split(" ").length>2);i=i+(i&&i.toLowerCase()!=="invalid date"&&!H?" UTC":"");return new Date(i)}};var s={parseUrl:function(i,K){try{var L=document.createElement("a");L.href=i;var H=L.href;L=document.createElement("a");L.href=H;if(K&&K in L){if("hash"===K){return String(L[K]).replace("#","")}else{if("protocol"===K){return String(L[K]).replace(":","")}else{if("search"===K){return String(L[K]).replace("?","")}else{if("port"===K&&!L[K]){if(L.protocol==="https:"){return"443"}else{if(L.protocol==="http:"){return"80"}}}}}}if("pathname"===K&&L[K]&&String(L[K]).substr(0,1)!=="/"){return"/"+L[K]}if("port"===K&&L[K]){return String(L[K])}return L[K]}if("origin"===K&&"protocol" in L&&L.protocol){return L.protocol+"//"+L.hostname+(L.port?":"+L.port:"")
}return}catch(J){if("function"===typeof URL){var I=new URL(i);if(K&&K in I){if("hash"===K){return String(I[K]).replace("#","")}else{if("protocol"===K){return String(I[K]).replace(":","")}else{if("search"===K){return String(I[K]).replace("?","")}else{if("port"===K&&!I[K]){if(I.protocol==="https:"){return"443"}else{if(I.protocol==="http:"){return"80"}}}}}}return I[K]}return}}},decodeSafe:function(H){try{return a.decodeURIComponent(H)}catch(i){return a.unescape(H)}},getQueryParameter:function(L,H){if(!C.isDefined(H)){H=a.location.search}if(!H||!C.isDefined(L)||L===null||L===false||L===""){return null}var i=H.substr(0,1);if(H!=="?"&&H!=="&"){H="?"+H}L=L.replace("[","\\[");L=L.replace("]","\\]");var K=new RegExp("[?&]"+L+"(=([^&#]*)|&|#|$)");var J=K.exec(H);if(!J){return null}if(!J[2]){return""}var I=J[2].replace(/\+/g," ");return this.decodeSafe(I)}};var c;var E={hasSetupScroll:false,scrollCallbacks:[],scrollListenEvents:["scroll","resize"],offScroll:function(H){if(H in this.scrollCallbacks){this.scrollCallbacks[H]=null
}var J=0,I=0;for(J in this.scrollCallbacks){if(this.scrollCallbacks[J]){I++}}if(!I){for(J=0;J<this.scrollListenEvents.length;J++){if(b.removeEventListener){a.removeEventListener(this.scrollListenEvents[J],this.didScroll,true)}else{a.detachEvent("on"+this.scrollListenEvents[J],this.didScroll)}}this.hasSetupScroll=false}},didScroll:function(i){if(c){return}if(i&&i.type&&i.type==="scroll"&&i.target&&i.target!==b&&i.target!==a){return}c=setTimeout(function(){c=null;var H;for(H=0;H<E.scrollCallbacks.length;H++){if(E.scrollCallbacks[H]){E.scrollCallbacks[H](i)}}},120)},onScroll:function(H){this.scrollCallbacks.push(H);if(!this.hasSetupScroll){this.hasSetupScroll=true;var i=0;for(i=0;i<this.scrollListenEvents.length;i++){if(b.addEventListener){a.addEventListener(this.scrollListenEvents[i],this.didScroll,true)}else{a.attachEvent("on"+this.scrollListenEvents[i],this.didScroll)}}}return this.scrollCallbacks.length-1},getScreenHeight:function(){return a.screen.height},getScreenWidth:function(){return a.screen.width
},getViewportWidth:function(){var i=a.innerWidth||b.documentElement.clientWidth||b.body.clientWidth;if(!i){return 0}return i},getViewportHeight:function(){var i=a.innerHeight||b.documentElement.clientHeight||b.body.clientHeight;if(!i){return 0}return i},getPerformanceTiming:function(i){if("performance" in a&&C.isObject(a.performance)&&C.isObject(a.performance.timing)&&i in a.performance.timing){return a.performance.timing[i]}return 0}};var B={loadScriptUrl:function(I,H){if(!H){H={}}if(!C.isDefined(H.defer)){H.defer=true}if(!C.isDefined(H.async)){H.async=true}if(!C.isDefined(H.type)){H.type="text/javascript"}var i=document.createElement("script");i.src=I;i.type=H.type;i.defer=!!H.defer;i.async=!!H.async;if(C.isFunction(H.onload)){i.onload=H.onload}if(C.isFunction(H.onerror)){i.onerror=H.onerror}if(C.isDefined(H.charset)){i.charset=H.charset}if(C.isDefined(H.id)){i.id=H.id}b.head.appendChild(i)},getScrollLeft:function(){return a.document.body.scrollLeft||a.document.documentElement.scrollLeft
},getScrollTop:function(){return a.document.body.scrollTop||a.document.documentElement.scrollTop},getDocumentHeight:function(){return Math.max(b.body.offsetHeight,b.body.scrollHeight,b.documentElement.offsetHeight,b.documentElement.clientHeight,b.documentElement.scrollHeight,1)},getDocumentWidth:function(){return Math.max(b.body.offsetWidth,b.body.scrollWidth,b.documentElement.offsetWidth,b.documentElement.clientWidth,b.documentElement.scrollWidth,1)},addEventListener:function(J,I,H,i){if(!J){z.log("element not found, cannot add event listener",J,this);return}if(J.addEventListener){i=i||false;J.addEventListener(I,H,i);return true}if(J.attachEvent){return J.attachEvent("on"+I,H)}J["on"+I]=H},getElementText:function(H){if(!H){return}if(m.dom.shouldElementBeMasked(H)&&H.children.length===0){return"*******"}if(m.dom.elementHasMaskedChild(H)){return m.dom.getElementTextWithMaskedChildren(H)}var i=H.innerText||H.textContent||"";i=i.replace(/([\s\uFEFF\xA0])+/g," ");i=i.replace(/(\s)+/g," ");return C.trim(i)
},getElementClassNames:function(i){if(i&&i.className){return C.trim(String(i.className).replace(/\s{2,}/g," "))}return""},getElementAttribute:function(J,H){if(!J||!H){return}var i=H.toLowerCase();if((i==="value"||i==="title"||i==="alt"||i==="label"||i==="placeholder")&&m.dom.shouldElementBeMasked(J)){return"*******"}if(J&&J.getAttribute){return J.getAttribute(H)}if(!J||!J.attributes){return}var I=(typeof J.attributes[H]);if("undefined"===I){return null}if(J.attributes[H].value){return J.attributes[H].value}if(J.attributes[H].nodeValue){return J.attributes[H].nodeValue}return null},_htmlCollectionToArray:function(I){var i=[];if(!I||!I.length){return i}var H;for(H=0;H<I.length;H++){i.push(I[H])}return i},byId:function(i){if(C.isString(i)&&i.substr(0,1)==="#"){i=i.substr(1)}return b.getElementById(i)},byClassName:function(i){if(i&&"getElementsByClassName" in b){return this._htmlCollectionToArray(b.getElementsByClassName(i))}return[]},byTagName:function(i){if(i&&"getElementsByTagName" in b){return this._htmlCollectionToArray(b.getElementsByTagName(i))
}return[]},bySelector:function(i){if(i&&"querySelectorAll" in b){return this._htmlCollectionToArray(b.querySelectorAll(i))}return[]},isElementContext:function(J,i){if(!J||!i){return false}J=String(J).toLowerCase();i=String(i).toLowerCase();var I=J.lastIndexOf("<"+i);if(I===-1){return false}var H=J.substring(I);return !H.match(new RegExp("<\\s*/\\s*"+i+">"))},isAttributeContext:function(N,L){if(!N||!L){return false}N=String(N).replace(/([\s\uFEFF\xA0]*=[\s\uFEFF\xA0]*)/g,"=");var I=N.lastIndexOf("<");if(I===-1){return false}var P=N.substring(I);var H=P.indexOf(">");if(H!==-1){return false}var O=P.lastIndexOf("=");if(O===-1){return false}var K=P.lastIndexOf(" ",O);var M=P.substring(K,O);M=C.trim(M);if(M.toLowerCase()!==L.toLowerCase()){return false}var J=P.substring(O).replace("=","");var i=J.substring(0,1);if('"'===i){return -1===J.substring(1).indexOf('"')}else{if("'"===i){return -1===J.substring(1).indexOf("'")}}return -1===J.indexOf(" ")},onLoad:function(i){if(b.readyState==="complete"){i()
}else{if(a.addEventListener){a.addEventListener("load",i)}else{if(a.attachEvent){a.attachEvent("onload",i)}}}},onReady:function(I){var i=false;if(b.attachEvent){i=b.readyState==="complete"}else{i=b.readyState!=="loading"}if(i){I();return}if(b.addEventListener){this.addEventListener(b,"DOMContentLoaded",function H(){b.removeEventListener("DOMContentLoaded",H,false);if(!i){i=true;I()}})}else{if(b.attachEvent){b.attachEvent("onreadystatechange",function H(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",H);if(!i){i=true;I()}}})}}this.onLoad(function(){if(!i){i=true;I()}})},onClick:function(H,i){if(typeof i==="undefined"){i=b.body}m.dom.addEventListener(i,"click",function(I){var J=(I.which?I.which:1);if(J===1){H(I,"left")}},true);m.dom.addEventListener(i,"auxclick",function(I){var J=(I.which?I.which:2);if(J===2){H(I,"middle")}},true);m.dom.addEventListener(i,"contextmenu",function(I){var J=(I.which?I.which:3);if(J===3){H(I,"right")}},true)},shouldElementBeMasked:function(H){if(typeof H==="undefined"){return false
}if(H.hasAttribute("data-matomo-mask")||H.hasAttribute("data-piwik-mask")){return true}if(H.hasAttribute("data-matomo-unmask")||H.hasAttribute("data-piwik-unmask")){return false}var i=H.parentElement;while(i){if(i.hasAttribute("data-matomo-mask")||i.hasAttribute("data-piwik-mask")){return true}if(i.hasAttribute("data-matomo-unmask")||i.hasAttribute("data-piwik-unmask")){return false}i=i.parentElement}return false},elementHasMaskedChild:function(i){if(typeof i==="undefined"){return false}if(i.children.length===0){return false}if(i.hasAttribute("data-matomo-mask")||i.hasAttribute("data-piwik-mask")||m.dom.shouldElementBeMasked(i)){return true}return i.querySelector("[data-matomo-mask],[data-piwik-mask]")!==null},getElementTextWithMaskedChildren:function(I){var L="";var K=I.children;for(var H=0;H<K.length;H++){var J=K[H];L+=m.dom.getElementText(J)+" "}return C.trim(L)}};function x(I){this.window=a;this.document=b;this.set=function(i,J){this[i]=J};this.get=function(J,i){if(J===null||J===false||!C.isDefined(J)){return i
}if(J in this){if(C.isObject(this[J])&&"get" in this[J]&&C.isFunction(this[J].get)){return this[J].get()}return this[J]}var K=v(J,this);if(C.isDefined(K)){return K}return i};this.buildVariable=function(i){return p(i,this.get("container"))};if(C.isObject(I)){for(var H in I){if(C.hasProperty(I,H)){this.set(H,I[H])}}}}function A(H,i){this.isValid=function(){var J=p(H.actual,i).get();var I=p(H.expected,i).get();return C.compare(J,I,H.comparison)}}function p(H,i){if(C.isObject(H)&&H.joinedVariable&&C.isArray(H.joinedVariable)){return new r(H.joinedVariable,i)}else{if(C.isObject(H)&&H.type){return new t(H,i)}}return new n(H,i)}function r(H,i){this.name="";this.type="JoinedVariable";this.getDefinition=function(){return H};this.get=function(){var J="",K;for(var I=0;I<H.length;I++){K=p(H[I],i).toString();if(K!==false&&K!==null&&C.isDefined(K)){J+=K}}return J};this.toString=function(){return this.get()};this.addDebugValues=function(I){I.push({name:null,type:"_joined",value:this.get()})}}function n(J,H){this.name="";
this.type="ConstantVariable";this.getDefinition=function(){return J};function I(L){return L&&C.isObject(L)&&!C.isArray(L)&&(C.hasProperty(L,"type")||C.hasProperty(L,"joinedVariable"))}function K(N){if(N==null||typeof N!=="object"){return N}var L=new N.constructor();var M;for(M in N){if(C.hasProperty(N,M)){L[M]=K(N[M])}}return L}function i(M){var L;if(I(M)){M=p(M,H).get()}else{if(M&&C.isArray(M)){for(L=0;L<M.length;L++){M[L]=i(M[L])}}else{if(M&&C.isObject(M)){for(L in M){if(C.hasProperty(M,L)){M[L]=i(M[L])}}}}}return M}this.get=function(){var L=J;if(C.isObject(L)){L=K(L);L=i(L)}return L};this.toString=function(){return J};this.addDebugValues=function(L){L.push({name:null,type:"_constant",value:this.get()})}}function t(I,H){this.type=I.type;this.name=I.name;this.lookUpTable=I.lookUpTable||[];this.defaultValue=undefined;this.parameters=I.parameters||{};this.getDefinition=function(){return I};this.get=function(){var M;try{M=this.theVariable.get()}catch(N){z.error("Failed to get value of variable",N,this);
M=undefined}if((!C.isDefined(M)||M===null||M===false)&&C.isDefined(this.defaultValue)){M=this.defaultValue}var L;for(L=0;L<this.lookUpTable.length;L++){var O=this.lookUpTable[L];if(C.compare(M,O.matchValue,O.comparison)){return O.outValue}}return M};this.toString=function(){if(this.theVariable&&C.hasProperty(this.theVariable,"toString")&&C.isFunction(this.theVariable.toString)){try{return this.theVariable.toString()}catch(i){z.error("Failed to get toString of variable",i,this);return}}return this.get()};this.addDebugValues=function(i){i.push({name:this.name,type:this.type,value:this.get()})};if("undefined"!==typeof I.defaultValue){this.defaultValue=I.defaultValue}if(!C.isDefined(I.Variable)||!I.Variable){z.log("no template defined for variable ",I);return}var J,K=new x({variable:this,container:H});if(C.isObject(I.parameters)){for(J in I.parameters){if(C.hasProperty(I.parameters,J)){K.set(J,p(I.parameters[J],H))}}}if(C.isFunction(I.Variable)){this.theVariable=new I.Variable(K,m)}else{if(C.isObject(I.Variable)){this.theVariable=I.Variable
}else{if(I.Variable in H.templates){this.theVariable=new H.templates[I.Variable](K,m)}else{D("No matching variable template found")}}}}function f(J,H){this.referencedTags=[];this.id=J.id;this.type=J.type;this.name=J.name;this.conditions=[];this.parameters=J.parameters||{};var I=this;this.getId=function(){return this.id};this.setUp=function(){if(this.theTrigger&&this.theTrigger.setUp&&C.isFunction(this.theTrigger.setUp)){this.theTrigger.setUp(function(Q){q.push(Q);if(!("event" in Q)){return}var M={tags:[],variables:[],metTrigger:null,name:Q.event,eventData:Q,container:{}};var P,O;if(I.meetsConditions()){z.log("The condition is met for trigger "+I.name,I);M.metTrigger={name:I.name,type:I.type};var N=I.getReferencedTags();for(O=0;O<N.length;O++){if(N[O].hasBlockTrigger(I)){N[O].block();N[O].addDebugValues(M.tags,"Block")}else{if(N[O].hasFireTrigger(I)){N[O].fire();N[O].addDebugValues(M.tags,"Fire")}}}}if(window.mtmPreviewWindow||z.enabled){H.addDebugValues(M.container);d(M);if(z.enabled){z.log("event: ",M)
}}})}};this.addReferencedTag=function(i){this.referencedTags.push(i)};this.getReferencedTags=function(){return this.referencedTags};this.meetsConditions=function(){var M,N;for(M=0;M<this.conditions.length;M++){N=new A(this.conditions[M],H);if(!N.isValid()){return false}}return true};if(J.conditions&&C.isArray(J.conditions)){this.conditions=J.conditions}var K,L=new x({trigger:this,container:H});if(C.isObject(J.parameters)){for(K in J.parameters){if(C.hasProperty(J.parameters,K)){L.set(K,p(J.parameters[K],H))}}}if(!C.isDefined(J.Trigger)||!J.Trigger){z.error("no template defined for trigger ",J);return}if(C.isFunction(J.Trigger)){this.theTrigger=new J.Trigger(L,m)}else{if(C.isObject(J.Trigger)){this.theTrigger=J.Trigger}else{if(J.Trigger in H.templates){this.theTrigger=new H.templates[J.Trigger](L,m)}else{D("No matching trigger template found")}}}L=null}function h(H,I){this.type=H.type;this.name=H.name;this.fireTriggerIds=H.fireTriggerIds?H.fireTriggerIds:[];this.blockTriggerIds=H.blockTriggerIds?H.blockTriggerIds:[];
this.fireLimit=H.fireLimit?H.fireLimit:h.FIRE_LIMIT_UNLIMITED;this.fireDelay=H.fireDelay?parseInt(H.fireDelay,10):0;this.startDate=H.startDate?H.startDate:null;this.endDate=H.endDate?H.endDate:null;this.numExecuted=0;this.blocked=false;this.parameters=H.parameters||{};this.isTagFireLimitAllowedInPreviewMode=I.isTagFireLimitAllowedInPreviewMode||false;var J=this;this.addDebugValues=function(i,M){i.push({action:M,type:this.type,name:this.name,numExecuted:this.numExecuted})};this._doFire=function(){if(this.blocked){z.log("not firing as this tag is blocked",this);return"tag is blocked"}if(this.fireLimit!==h.FIRE_LIMIT_UNLIMITED&&this.numExecuted){z.log("not firing as this tag has limit reached",this);return"fire limit is restricted"}var M="tag";if(I.id){M+="_"+I.id}if(this.fireLimit===h.FIRE_LIMIT_ONCE_24HOURS&&(!window.mtmPreviewWindow||this.isTagFireLimitAllowedInPreviewMode)){if(y.get(M,this.name)){z.log("not firing as this tag has 24hours limit reached",this);return"fire limit 24hours is restricted"
}}if(this.fireLimit===h.FIRE_LIMIT_ONCE_LIFETIME&&(!window.mtmPreviewWindow||this.isTagFireLimitAllowedInPreviewMode)){if(y.get(M,this.name)){z.log("not firing as this tag has limit reached",this);return"fire limit lifetime is restricted"}}if(!F.matchesDateRange(new Date(),this.startDate,this.endDate)){z.log("not firing as this tag does not match date",this);return"date range does not match"}if(!this.theTag||!this.theTag.fire){z.log("not firing as tag does not exist anymore",this);return"tag not found"}z.log("firing this tag",this);this.numExecuted++;if(this.fireLimit===h.FIRE_LIMIT_ONCE_24HOURS){var i=24*60*60;y.set(M,this.name,"1",i)}if(this.fireLimit===h.FIRE_LIMIT_ONCE_LIFETIME){y.set(M,this.name,"1")}this.theTag.fire();z.log("fired this tag",this)};this.fire=function(){if(this.fireDelay){setTimeout(function(){J._doFire()},this.fireDelay)}else{return this._doFire()}};this.block=function(){this.blocked=true};this.hasFireTrigger=function(i){if(!this.fireTriggerIds||!this.fireTriggerIds.length){return false
}if(!i){return false}var M=i.getId();return C.indexOfArray(this.fireTriggerIds,M)!==-1};this.hasBlockTrigger=function(i){if(!this.blockTriggerIds||!this.blockTriggerIds.length){return false}if(!i){return false}var M=i.getId();return C.indexOfArray(this.blockTriggerIds,M)!==-1};if(!C.isDefined(H.Tag)||!H.Tag){z.error("no template defined for tag ",H);return}var K,L=new x({tag:this,container:I});if(C.isObject(H.parameters)){for(K in H.parameters){if(C.hasProperty(H.parameters,K)){L.set(K,p(H.parameters[K],I))}}}if(C.isFunction(H.Tag)){this.theTag=new H.Tag(L,m)}else{if(C.isObject(H.Tag)){this.theTag=H.Tag}else{if(H.Tag in I.templates){this.theTag=new I.templates[H.Tag](L,m)}else{D("No matching tag template found")}}}}h.FIRE_LIMIT_ONCE_PAGE="once_page";h.FIRE_LIMIT_ONCE_24HOURS="once_24hours";h.FIRE_LIMIT_ONCE_LIFETIME="once_lifetime";h.FIRE_LIMIT_UNLIMITED="unlimited";function o(I,N){var J=this;this.id=I.id;this.idsite=I.idsite||null;this.isTagFireLimitAllowedInPreviewMode=I.isTagFireLimitAllowedInPreviewMode||false;
this.versionName=I.versionName||null;this.revision=I.revision||null;this.environment=I.environment||null;this.templates=N||{};this.dataLayer=new u();this.variables=[];this.triggers=[];this.tags=[];this.onNewGlobalDataLayerValue=function(i){this.dataLayer.push(i)};q.on(function(i){J.onNewGlobalDataLayerValue(i)});this.addDebugValues=function(P){P.variables=[];var Q;for(Q=0;Q<this.variables.length;Q++){this.variables[Q].addDebugValues(P.variables)}P.tags=[];for(Q=0;Q<this.tags.length;Q++){this.tags[Q].addDebugValues(P.tags,"Not Fired Yet")}P.id=this.id;P.versionName=this.versionName;P.dataLayer=JSON.parse(JSON.stringify(this.dataLayer.values,function(i,R){if(typeof R==="object"&&R instanceof Node){return R.nodeName}else{return R}}))};this.getTriggerById=function(P){if(!P){return}var Q;for(Q=0;Q<this.triggers.length;Q++){if(this.triggers[Q].getId()===P){return this.triggers[Q]}}};this.addTrigger=function(i){if(!i){return}var P=this.getTriggerById(i.id);if(!P){P=new f(i,this);this.triggers.push(P)
}return P};var M,L,H,O,K;if(I.variables&&C.isArray(I.variables)){for(M=0;M<I.variables.length;M++){this.variables.push(p(I.variables[M],this))}}if(I.triggers&&C.isArray(I.triggers)){if(I.tags&&C.isArray(I.tags)){I.triggers.sort(function(Q,P){var R=false,T=false,i,S;for(S=0;S<I.tags.length;S++){i=I.tags[S];if(i&&i.blockTriggerIds&&C.isArray(i.blockTriggerIds)){R=R||C.indexOfArray(i.blockTriggerIds,Q.id)!==-1;T=T||C.indexOfArray(i.blockTriggerIds,P.id)!==-1}}if(R&&!T){return -1}else{if(T&&!R){return 1}}if(Q.id<P.id){return -1}return 1})}for(M=0;M<I.triggers.length;M++){this.addTrigger(I.triggers[M])}}if(I.tags&&C.isArray(I.tags)){for(M=0;M<I.tags.length;M++){O=I.tags[M];H=new h(O,this);this.tags.push(H);if(O.blockTriggerIds&&C.isArray(O.blockTriggerIds)){for(L=0;L<O.blockTriggerIds.length;L++){K=this.getTriggerById(O.blockTriggerIds[L]);if(K){K.addReferencedTag(H)}}}if(O.fireTriggerIds&&C.isArray(O.fireTriggerIds)){for(L=0;L<O.fireTriggerIds.length;L++){K=this.getTriggerById(O.fireTriggerIds[L]);
if(K){K.addReferencedTag(H)}}}}}this.run=function(){var Q=q.getAllEvents();var P;for(P=0;P<Q.length;P++){this.onNewGlobalDataLayerValue(Q[P])}for(P=0;P<this.triggers.length;P++){this.triggers[P].setUp()}}}var m={THROW_ERRORS:true,dataLayer:q,containers:[],url:s,date:F,utils:C,debug:z,dom:B,window:E,Variable:t,storage:{local:y,session:e},_buildVariable:p,Condition:A,TemplateParameters:x,Trigger:f,Tag:h,throwError:D,Container:o,addContainer:function(N,K){var L=s.getQueryParameter("mtmSetDebugFlag");if(L){var I=encodeURIComponent(N.idsite);var i=encodeURIComponent(N.id);if(L==1){var J=new Date();J.setTime(J.getTime()+(7*24*60*60*1000));document.cookie="mtmPreviewMode=mtmPreview"+I+"_"+i+"%3D1;expires="+J.toUTCString()+";SameSite=Lax"}else{document.cookie="mtmPreviewMode=mtmPreview"+I+"_"+i+"%3D1;expires=Thu, 01 Jan 1970 00:00:00 UTC;SameSite=Lax";window.close()}}if(!window.mtmPreviewWindow){var M=b.getElementById("mtmDebugFrame");if(M&&M.contentWindow){window.mtmPreviewWindow=M.contentWindow
}}z.log("creating container");var H=new o(N,K);this.containers.push(H);H.dataLayer.push({"mtm.containerId":H.id});z.log("running container");H.run();return H},enableDebugMode:function(){z.enabled=true}};if("matomoTagManagerAsyncInit" in a&&C.isFunction(a.matomoTagManagerAsyncInit)){a.matomoTagManagerAsyncInit(m)}function g(){var L,J,I,N,O;for(L=0;L<arguments.length;L+=1){O=null;if(arguments[L]&&arguments[L].slice){O=arguments[L].slice()}N=arguments[L];if(C.isObject(N)&&!C.isArray(N)){q.push(N);continue}I=N.shift();var M=C.isString(I)&&I.indexOf("::")>0;if(M){var H,K;H=I.split("::");K=H[0];I=H[1];if("object"===typeof m[K]&&C.isFunction(m[K][I])){m[K][I].apply(m[K],N)}}else{if(I&&I in m&&C.isFunction(m[I])){m[I].apply(m,N)}else{z.error("method "+I+" is not valid")}}}}C.setMethodWrapIfNeeded(a._mtm,"push",g);var w;for(w=0;w<a._mtm.length;w++){g(a._mtm[w])}q.push({"mtm.mtmScriptLoadedTime":l});if(("undefined"===typeof ignoreGtmDataLayer||!ignoreGtmDataLayer)&&"undefined"!==typeof a.dataLayer&&C.isArray(a.dataLayer)){for(w=0;
w<a.dataLayer.length;w++){if(C.isObject(a.dataLayer[w])){q.push(a.dataLayer[w])}}}if(!("undefined"===typeof activelySyncGtmDataLayer)&&activelySyncGtmDataLayer){a.dataLayer=a.dataLayer||[];const k=function(H,i){H.push=function(I){Array.prototype.push.call(H,I);i(H)}};k(a.dataLayer,function(i){q.push(a.dataLayer[a.dataLayer.length-1])})}return m})()}
/*!!! initContainerHook */
})();